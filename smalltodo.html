<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
      integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"
    />
    <style>
      body {
        background-color: #eaeaea;
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      }
      .input {
        padding: 5px 15px;
        outline: none;
        border-radius: 5px;
        border: 1px solid #e2f3f5;
        font-size: 16px;
      }

      .btn {
        padding: 8px 15px;
        border-radius: 5px;
        background: #482ff7;
        color: #fff;
        outline: none;
        border: 0;
        margin-left: 8px;
      }

      li {
        position: ;
        list-style-type: number;
        margin-bottom: 15px;
        cursor: pointer;
      }
      .fa-trash-can,
      .fa-pen {
        position: absolute;
        background: blue;
        color: #fff;
        padding: 5px 10px;
        border-radius: 3px;
      }
      .fa-trash-can {
        left: 180px;
        border-right: 1px solid #eaeaea;
      }

      .fa-pen {
        left: 218px;
      }
      .dp-none {
        display: none;
      }
    </style>
  </head>
  <body>
    <div class="box">
      <input
        type="text"
        class="input"
        placeholder="say something"
        autocomplete="off"
        autofocus
      />
      <button class="btn" onclick="addValue()">Add</button>
    </div>
    <ul class="list" id="list"></ul>

    <script>
      let input = document.querySelector(".input");
      let addButton = document.querySelector(".btn");
      let list = document.getElementById("list");
      let i = 1;

      input.addEventListener("keypress", function (e) {
        if (e.code === "Enter" && input.value !== "") {
          createAndAdd();
        } else {
          return;
        }
      });
      function addValue() {
        if (input.value !== "") {
          createAndAdd();
        } else {
          alert("User input invalid");
        }
      }

      function createAndAdd() {
        let li = document.createElement("li");
        li.id = `li${i}`;
        li.classList.add("animate__animated", "animate__fadeInDown");
        //text create
        let span = document.createElement("span");
        span.id = `text${i}`;
        span.id = `text${i}`;
        span.append(input.value);
        //delete
        let del = document.createElement("i");
        del.id = `del${i}`;
        del.classList.add("fa-solid", "fa-trash-can");
        del.setAttribute("onclick", `del(${i})`);
        //edit
        let edit = document.createElement("i");
        edit.id = `edit${i}`;
        edit.classList.add("fa-solid", "fa-pen");
        edit.setAttribute("onclick", `edit(${i})`);

        li.append(span, del, edit);
        list.append(li);
        input.value = "";
        i++;
      }
      function del(current) {
        let currentLi = document.getElementById(`li${current}`);
        let currentText = document.getElementById(`text${current}`).innerHTML;

        let deleteConfirm = confirm(
          `Are You Sure to delete this text ${currentText}`
        );

        if (deleteConfirm) {
          currentLi.classList.add("animate__animated", "animate__fadeOutLeft");
          // list.removeChild(currentLi);
          setTimeout(() => {
            list.removeChild(currentLi);
          }, 200);
        } else {
          console.log("delete cancelled.");
        }
      }
      function edit(current) {
        let currentLi = document.getElementById(`li${current}`);
        let currentText = document.getElementById(`text${current}`);

        let editText = prompt("You can edit now", currentText.innerHTML);

        if (editText) {
          currentText.innerHTML = editText;
        } else {
          console.log("edit canceled");
        }
      }
    </script>
  </body>
</html>

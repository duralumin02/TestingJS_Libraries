<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Document</title>
		<link
			rel="stylesheet"
			href="./node_modules/bootstrap/dist/css/bootstrap.min.css"
		/>

		<link rel="stylesheet" href="./node_modules/animate.css/animate.min.css" />
		<link
			rel="stylesheet"
			href="./node_modules/bootstrap-icons/font/bootstrap-icons.css"
		/>
	</head>
	<style>
		.box {
			width: 500px;
			height: 500px;
		}

		.del-list {
			cursor: pointer;
		}
	</style>
	<body>
		<div class="box mx-auto mt-5">
			<input type="text" id="input" class="form-control" />
			<ul id="list" class="list-group mt-3"></ul>
		</div>
	</body>

	<script>
		let list = document.querySelector("#list");
		let inputTag = document.querySelector("#input");

		// let fruits = ["orange", "apple", "banana", "pineaple"];

		// fruits.forEach((fruit) => {
		// 	createList(fruit);
		// });
		// for (fruit of fruits) {
		// 	createList(fruit);
		// }

		// inputTag.addEventListener("keypress", (e) => {
		// 	if (e.keyCode === 13) {
		// 		list.innerHTML += `<li class="list-group-item animate__animated animate__bounceInRight">${input.value}</li>`;
		// 		input.value = null;
		// 	}
		// });

		if (localStorage.getItem("lists")) {
			console.log("shi tl");
			list.innerHTML = localStorage.getItem("lists");
		}

		inputTag.addEventListener("keypress", function (e) {
			if (e.key === "Enter") {
				createList(input.value);
				input.value = null;
			}
		});

		function createList(text) {
			let li = document.createElement("li");
			li.innerText = text;
			li.innerHTML += `<i class="bi bi-trash-fill text-danger del-list"></i>`;
			li.classList.add(
				"list-group-item",
				"animate__animated",
				"animate__bounceInRight",
				"d-flex",
				"justify-content-between"
			);

			list.append(li);
			localStorage.setItem("lists", list.innerHTML);
		}

		// document.querySelectorAll(".del-list").forEach(function (delIcon) {
		// 	delIcon.addEventListener("click", function (e) {
		// 		// this.parentElement.remove();
		// 		e.target.parentElement.classList.replace(
		// 			"animate__bounceInRight",
		// 			"animate__rubberBand"
		// 		);
		// 		setInterval(() => {
		// 			e.target.parentElement.remove();
		// 		}, 700);
		// 	});
		// });

		//event delegation
		list.addEventListener("click", function (e) {
			if (e.target.classList.contains("del-list")) {
				e.target.parentElement.classList.replace(
					"animate__bounceInRight",
					"animate__rubberBand"
				);

				setInterval(() => {
					e.target.parentElement.remove();
					localStorage.setItem("lists", list.innerHTML);
				}, 800);
			}
		});
	</script>

	<script src="./node_modules/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
</html>
